<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Campus Reimbursement Accountability – MVP</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 20px;
    }
    h1, h2 {
      color: #1a237e;
    }
    .card {
      background: white;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .status {
      font-weight: bold;
    }
    .breach {
      color: red;
    }
    .ok {
      color: green;
    }
    ul {
      padding-left: 20px;
    }
    select, button {
      padding: 6px;
      margin-top: 5px;
    }
  </style>
</head>
<body>

<h1>Campus Reimbursement Accountability System – MVP</h1>

<div class="card">
  <h2>View As</h2>
  <select id="roleSelect" onchange="render()">
    <option value="student">Student</option>
    <option value="approver">Department Approver</option>
    <option value="authority">Escalation Authority</option>
  </select>
</div>

<div class="card">
  <h2>Reimbursement Claim</h2>
  <p><strong>Claim ID:</strong> RC-1023</p>
  <p><strong>Amount:</strong> ₹8,500</p>
  <p><strong>Department:</strong> Computer Science</p>
  <p><strong>Status:</strong> <span id="status" class="status">SUBMITTED</span></p>
  <p><strong>SLA:</strong> 7 days</p>
  <p><strong>Elapsed Time:</strong> <span id="time">Day 1</span></p>
</div>

<div class="card">
  <h2>SLA Clock</h2>
  <button onclick="advanceDay()">Advance Day</button>
  <p id="slaMessage" class="ok">SLA within limits.</p>
</div>

<div class="card">
  <h2>Audit Log (Immutable)</h2>
  <ul id="auditLog">
    <li>[Day 0] Claim submitted by Student</li>
    <li>[Day 0] SLA clock started (7 days)</li>
  </ul>
</div>

<div class="card" id="roleView"></div>

<script>
  let day = 1;
  let status = "SUBMITTED";
  let escalated = false;

  function advanceDay() {
    day++;
    document.getElementById("time").innerText = "Day " + day;

    if (day <= 7) {
      document.getElementById("slaMessage").innerText = "SLA within limits.";
      document.getElementById("slaMessage").className = "ok";
    }

    if (day > 7 && !escalated) {
      status = "ESCALATED";
      escalated = true;
      document.getElementById("status").innerText = status;
      document.getElementById("status").className = "breach";
      document.getElementById("slaMessage").innerText = "SLA BREACHED – Escalation triggered!";
      document.getElementById("slaMessage").className = "breach";

      const log = document.getElementById("auditLog");
      log.innerHTML += "<li>[Day 8] SLA breached automatically</li>";
      log.innerHTML += "<li>[Day 8] Escalated to Escalation Authority</li>";
    }

    render();
  }

  function render() {
    const role = document.getElementById("roleSelect").value;
    const view = document.getElementById("roleView");

    if (role === "student") {
      view.innerHTML = `
        <h2>Student View</h2>
        <p>You can track claim status, SLA countdown, and escalations.</p>
      `;
    }

    if (role === "approver") {
      view.innerHTML = `
        <h2>Department Approver View</h2>
        <p>Claims prioritized by SLA urgency.</p>
        <p><strong>RC-1023:</strong> ${status}</p>
      `;
    }

    if (role === "authority") {
      view.innerHTML = `
        <h2>Escalation Authority View</h2>
        <p>Automatically escalated claims appear here.</p>
        <p><strong>RC-1023:</strong> ${escalated ? "Requires intervention" : "No escalations yet"}</p>
      `;
    }
  }

  render();
</script>

</body>
</html>